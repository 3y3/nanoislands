// popup
.nb-popup
  opacity: 0
  z-index: 100
  position: absolute
  text-align: left
  white-space: normal
  background: #FFF
  box-shadow: 0px 0px 0px 1px rgba(0,0,0,.15), 0px 8px 30px -5px rgba(0,0,0,.5)

  // Custom content goes here. If there is a need in popup-wide things, drop it.
  .nb-popup__content
    display: block

    padding: $gapS
    white-space: normal // Doubled to fix IE bug


  .nb-popup__line
    display: block
    padding: ($gapS / 2) $gapS

  .nb-popup__line:first-child
    padding: $gapS $gapS ($gapS / 2) $gapS

  .nb-popup__line:last-child
    padding: ($gapS / 2) $gapS $gapS $gapS


  .nb-popup__line._link
    display: block

    text-decoration: none

    white-space: nowrap // Inline-only


  // popup's separator
  .nb-popup__hr
    margin: 3px 0
    height: 1px
    background: #DDD
    overflow: hidden


  // popup's tail
.nb-popup__tail
  position: absolute
  font-size: 11px
  width: 16px
  height: 16px
  clip: rect(0,0,0,0) // Hide until mode set

  .nb-popup_tail_to_bottom > &
    top: 0
    left: 50%
    margin: -16px -8px
    clip: rect(-99em, 99em, auto, -99em)

  .nb-popup_tail_to_top > &
    bottom: 0
    left: 50%
    margin: -16px -8px
    clip: rect(0, 99em, 99em, -99em)

  .nb-popup_tail_to_left > &
    top: 50%
    right: 0
    margin:  -8px -16px
    clip: rect(-99em, 99em, 99em, 0)

  .nb-popup_tail_to_right > &
    top: 50%
    left: 0
    margin:  -8px -16px
    clip: rect(-99em, auto, 99em, -99em)


.nb-popup__tail:before
  content: ""

  position: absolute
  top: 0
  left: 0

  width: 100%
  height: 100%

  background: #FFF

  box-shadow: 0px 0px 0px 1px rgba(0, 0, 0, 0.2), 3px 3px 20px 0 rgba(0, 0, 0, 0.2)
  transform: rotate(45deg)

  .nb-popup_tail_to_left > &,
  .nb-popup_tail_to_right > &
    transform: rotate(45deg)


  .nb-popup_tail_to_bottom > &
    top: 50%

  .nb-popup_tail_to_top > &
    top: -50%


  .nb-popup_tail_to_right > &
    left: 50%

  .nb-popup_tail_to_left > &
    left: -50%
