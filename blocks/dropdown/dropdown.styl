link ?= prefix + 'link'
dropdown ?= prefix + 'dropdown'

// Dropdown
.dropdown {
    z-index: 1073741823;
    position: absolute;

    text-align: left;
    white-space: normal;

    background: #FFF;

    box-shadow: rgba(0,​ 0,​ 0,​ 0.15) 0px 0px 0px 1px,​ rgba(0,​ 0,​ 0,​ 0.5) 0px 8px 30px -5px;

    // Custom content goes here. If there is a need in Dropdown-wide things, drop it.
    .dropdown__content {
        display: block;

        padding: 6px 12px;

        white-space: normal; // Doubled to fix IE bug
    }

    // Dropdown's line (like for dropdowns)
    .dropdown__line {
        display: block;
        padding: 3px 12px;
    }

    // Find out if it needs to be an extra class, not multiclass one
    // Also, all the color/decoration things could go somewhere else?
    .dropdown__line.{link} {
        display: block;

        white-space: nowrap; // Inline-only

        line-height: 1.5em;

        // Blocky hover dropdown style
        .dropdown_theme_blocky & {
            text-decoration: none;

            color: #000;
        }

        .dropdown_theme_blocky .dropdown:hover {
            background-color: #85CDFF;
        }
    }


    // Dropdown's separator
    .dropdown__hr {
        margin: 3px 0;
        height: 1px;
        background: #DDD;
        overflow: hidden;
    }

    // Dropdown modes

    .dropdown_dropdown {
        padding: 3px 0;
    }

}


// Dropdown's tail
.dropdown__tail {
    position: absolute;

    font-size: 11px;

    width: 1em;
    height: 1em;
    clip: rect(0,0,0,0); // Hide until mode set

    .dropdown_to_bottom > & {
        top: 0;
        left: 50%;
        margin: -1em -.5em;
        clip: rect(-99em, 99em, auto, -99em)
    }

    .dropdown_to_top > & {
        bottom: 0;
        left: 50%;
        margin: -1em -.5em;
        clip: rect(0, 99em, 99em, -99em)
    }

    .dropdown_to_left > & {
        top: 50%;
        right: 0;
        margin: -.5em -1em;
        clip: rect(-99em, 99em, 99em, 0)
    }

    .dropdown_to_right > & {
        top: 50%;
        left: 0;
        margin: -.5em -1em;
        clip: rect(-99em, auto, 99em, -99em)
    }

    .dropdown__tail:before {
        content: "";

        position: absolute;
        top: 0;
        left: 0;

        width: 100%;
        height: 100%;

        background: #FFF;

        box-shadow: .2em .2em .8em -.2em #000;
        transform: scale(.65,1) rotate(45deg);

        .dropdown_to_left > &,
        .dropdown_to_right > & {
            transform: scale(1,.65) rotate(45deg);
        }

        .dropdown_to_bottom > & {
            top: 50%;
        }

        .dropdown_to_top > & {
            top: -50%;
        }

        .dropdown_to_right > & {
            left: 50%;
        }

        .dropdown_to_left > & {
            left: -50%;
        }
    }
}
